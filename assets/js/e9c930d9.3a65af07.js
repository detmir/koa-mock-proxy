"use strict";(self.webpackChunkkoa_mock_proxy_website=self.webpackChunkkoa_mock_proxy_website||[]).push([[555],{3905:(e,r,t)=>{t.d(r,{Zo:()=>d,kt:()=>u});var o=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,o,n=function(e,r){if(null==e)return{};var t,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=o.createContext({}),l=function(e){var r=o.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):a(a({},r),e)),t},d=function(e){var r=l(e.components);return o.createElement(s.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return o.createElement(o.Fragment,{},r)}},m=o.forwardRef((function(e,r){var t=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),m=l(t),u=n,k=m["".concat(s,".").concat(u)]||m[u]||p[u]||i;return t?o.createElement(k,a(a({ref:r},d),{},{components:t})):o.createElement(k,a({ref:r},d))}));function u(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var i=t.length,a=new Array(i);a[0]=m;var c={};for(var s in r)hasOwnProperty.call(r,s)&&(c[s]=r[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,a[1]=c;for(var l=2;l<i;l++)a[l]=t[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5061:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var o=t(7462),n=(t(7294),t(3905));const i={},a="Recording mocks",c={unversionedId:"recording",id:"recording",title:"Recording mocks",description:"There are 2 ways of recording mocks:",source:"@site/../docs/recording.md",sourceDirName:".",slug:"/recording",permalink:"/koa-mock-proxy/docs/recording",draft:!1,editUrl:"https://github.com/detmir/koa-mock-proxy/tree/main/docs/../docs/recording.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Working modes",permalink:"/koa-mock-proxy/docs/workingModes"},next:{title:"Mocks format and location",permalink:"/koa-mock-proxy/docs/mocks"}},s={},l=[{value:"Records format",id:"records-format",level:2},{value:"Recording using <code>record</code> or <code>replayOrRecordMode</code> modes",id:"recording-using-record-or-replayorrecordmode-modes",level:2},{value:"Recording using UI",id:"recording-using-ui",level:2}],d={toc:l};function p(e){let{components:r,...t}=e;return(0,n.kt)("wrapper",(0,o.Z)({},d,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"recording-mocks"},"Recording mocks"),(0,n.kt)("p",null,"There are 2 ways of recording mocks:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Using ",(0,n.kt)("inlineCode",{parentName:"li"},"record")," or ",(0,n.kt)("inlineCode",{parentName:"li"},"replayOrRecord")," ",(0,n.kt)("a",{parentName:"li",href:"/koa-mock-proxy/docs/workingModes"},"modes")," in optional"),(0,n.kt)("li",{parentName:"ul"},"Using ",(0,n.kt)("a",{parentName:"li",href:"/koa-mock-proxy/docs/ui"},"UI"))),(0,n.kt)("h2",{id:"records-format"},"Records format"),(0,n.kt)("p",null,"Currently, ",(0,n.kt)("inlineCode",{parentName:"p"},"koa-mock-server")," records requests without taking care of query params."),(0,n.kt)("p",null,"For example, recorded mocks from ",(0,n.kt)("inlineCode",{parentName:"p"},"GET /products?category=A")," can be reused for any requests to path ",(0,n.kt)("inlineCode",{parentName:"p"},"/products")," by method ",(0,n.kt)("inlineCode",{parentName:"p"},"GET"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"GET /products?category=b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"GET /products?limit=10")),(0,n.kt)("li",{parentName:"ul"},"(but not ",(0,n.kt)("inlineCode",{parentName:"li"},"GET /products/1"),")")),(0,n.kt)("p",null,"This behaviour is intentional. In our practice in many cases mocks with different query params can be reused in tests.\nReusing mocks is often beneficial, because more mocks you have, more difficult to support them (update, understand or delete)."),(0,n.kt)("p",null,"Sometimes reusing mocks is not possible.\nIn that way it's recommended to rename recorded mocks ",(0,n.kt)("a",{parentName:"p",href:"/koa-mock-proxy/docs/mocks"},"using file naming rules")," to\nfit your needs better. Another alternative solution is to use ",(0,n.kt)("a",{parentName:"p",href:"/koa-mock-proxy/docs/mocks#js-mocks"},"JS mocks"),"."),(0,n.kt)("h2",{id:"recording-using-record-or-replayorrecordmode-modes"},"Recording using ",(0,n.kt)("inlineCode",{parentName:"h2"},"record")," or ",(0,n.kt)("inlineCode",{parentName:"h2"},"replayOrRecordMode")," modes"),(0,n.kt)("p",null,"In these modes mock server record mocks automatically after proxying. By default, existing mocks are not get overwritten.\nHowever, it's possible to overwrite mock by using ",(0,n.kt)("inlineCode",{parentName:"p"},"record")," mode with ",(0,n.kt)("inlineCode",{parentName:"p"},"recordOptions.overwrite")," set to true."),(0,n.kt)("h2",{id:"recording-using-ui"},"Recording using UI"),(0,n.kt)("p",null,"It's possible to record requests through UI in any working mode."),(0,n.kt)("p",null,"To do that:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Proxy needed requests to the target server"),(0,n.kt)("li",{parentName:"ul"},"Go to the UI"),(0,n.kt)("li",{parentName:"ul"},"Select mocks you need to record"),(0,n.kt)("li",{parentName:"ul"},"Click button ",(0,n.kt)("inlineCode",{parentName:"li"},"Record mocks"))))}p.isMDXComponent=!0}}]);